{% extends 'mebel/base.html' %}
{% load static %}
{% block styles %}
    <link rel="stylesheet" href="{% static 'css/swiper-bundle.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
{% endblock styles %}

{% block fullimg %}
    <div class="Full-img" id="FullImgBox">
        <img src="images/static/placeholder.jpg" id="FullImg">
        <span onclick="closeFullImg()">ê§ï</span>
    </div>
{% endblock fullimg %}

{% block mebel %}
<body>
<!-- Full img -->
<!--    <div class="Full-img" id="FullImgBox">-->
<!--        <img src="images/static/placeholder.jpg" id="FullImg">-->
<!--        <span onclick="closeFullImg()">ê§ï</span>-->
<!--    </div>-->
    <main>
        <div class="product">
            <div class="content">
                <div class="product-info">
                    <!-- Interactive img -->
                    <div class="Big-img" id="BigImgBox">
                        <img src="{{ mebel.poster.url }}" class="product-img" id="BigImg" onclick="openFullImg(this.src)">
                    </div>
                    <!-- <img src="/images/static/placeholder.jpg" class="product-img" onclick="openFullImg(this.src)"> -->
                    <ul class="product-info-list">
                        <li>
                            <div class="product-info-title">
                                –ó–∞–≥–æ–ª–æ–≤–æ–∫ / <a href="#">{{ mebel.title }}</a>
                            </div>
                        </li>
<!--                        <li>-->
<!--                            <a href="#">-->
<!--                                <button type="submit" class="product-info-button">-->
<!--                                    –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å-->
<!--                                    <img src="images/static/placeholder.jpg">-->
<!--                                </button>-->
<!--                            </a>-->
<!--                        </li>-->
                        <li>
                            <div class="product-info-text">
                                {{ mebel.description }}
                            </div>
                        </li>
                        <li>
                            <div class="product-info-title-comments">
<!--                               –ö–æ–ª–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ü–µ–Ω–æ–∫ : {{ rating_count }} —à—Ç. -->
                            </div>
                        </li>
                        <li>
                            <ul class="product-info-content">
                                <span class="product-info-title-raiting">–†–µ–π—Ç–∏–Ω–≥:</span>
                                {% with average_rating=mebel.get_average_rating %}
                                    {% for i in "12345" %}
                                        {% if average_rating >= forloop.counter %}
                                            <li><img class="product-raiting-image" src="{% static 'images/stars/star-on-big.png' %}"></li> <!-- –ü–æ–ª–Ω–∞—è –∑–≤–µ–∑–¥–∞ -->
                                        {% else %}
                                            <li><img class="product-raiting-image" src="{% static 'images/stars/star-off-big.png' %}"></li> <!-- –ü—É—Å—Ç–∞—è –∑–≤–µ–∑–¥–∞ -->
                                        {% endif %}
                                    {% endfor %}
                                {% endwith %}
                            </ul>
                        </li>
                        <li>
                            <form class="product-info-content" action="{% url 'add_rating' %}" method="post" name="rating">
                                <span class="product-info-title-raiting">–õ–∏—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞:</span>
                                {% csrf_token %}
                                <input type="hidden" value="{{ mebel.id }}" name="mebel">
                                <span class="rating">
                                    {% for k, v in star_form.fields.star.choices %}
                                        <input id="rating{{ v }}" type="radio" name="star"
                                               value="{{ k }}">
                                        <label for="rating{{ v }}">{{ k }}</label>
                                    {% endfor %}
                                </span>
                            </form>
                        </li>
                    </ul>
                </div>
                <div class="product-slider">
                    <div class="catalog catalog-new">
                        <div class="content">
                            <div class="catalog-title">–†–∞–∫—É—Ä—Å—ã : {{ mebel.mebelangles_set.count }} —à—Ç.</div>
                            <!-- –°–ª–∞–π–¥–µ—Ä Swiper –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ -->
                            <div class="swiper-container catalog-products-swiper">
                                <div class="swiper-wrapper">
                                    {% for angle in mebel.mebelangles_set.all %}
                                        <div class="swiper-slide">
                                            <a href="#">
                                                <img src="{{ angle.image.url }}" onclick="openBigImg(this.src)">
                                            </a>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <br>
    <br>
{% endblock mebel %}
{% block script %}
    <script src="{% static 'js/swiper-bundle.min.js' %}"></script>
    <script src="{% static 'js/swiper_script.js' %}"></script>
    <script src="{% static 'js/big_img.js' %}"></script>
    <script src="{% static 'js/full_img.js' %}"></script>
    <script src="{% static 'js/scripts.js' %}"></script>
{% endblock script %}